<?xml version="1.0" encoding="UTF-8"?>
<osm-notes>
<!-- Note: 1359375 - Historically longest note with problematic HTML content -->
<note id="1359375" lat="40.7128" lon="-74.0060" created_at="2013-04-28T02:39:27Z" closed_at="">
  <comment action="opened" timestamp="2013-04-28T02:39:27Z" uid="123" user="testuser">
    <text>This is a historically problematic note with very long HTML content that caused XSLT recursion issues. The content includes many nested quotes and HTML tags that can trigger deep template recursion in XSLT processing.</text>
    <html>&lt;div class="note-content"&gt;&lt;p&gt;This note contains extremely long HTML content with many nested elements and quotes that historically caused XSLT processing to fail with recursion depth errors.&lt;/p&gt;&lt;p&gt;The problem was that some notes from OpenStreetMap contain HTML content that is generated by users, and this particular note had content that caused the XSLT template &lt;code&gt;escape-quotes&lt;/code&gt; to recurse infinitely due to the complexity of the HTML structure.&lt;/p&gt;&lt;p&gt;This is a test case to ensure that our &lt;code&gt;--maxdepth 4000&lt;/code&gt; parameter properly handles such problematic content without failing.&lt;/p&gt;&lt;p&gt;The original error was: &lt;code&gt;xsltApplySequenceConstructor: A potential infinite template recursion was detected. You can adjust xsltMaxDepth (--maxdepth) in order to raise the maximum number of nested template calls and variables/params (currently set to 3000).&lt;/code&gt;&lt;/p&gt;&lt;p&gt;By increasing the limit to 4000, we can now process these problematic notes successfully.&lt;/p&gt;&lt;p&gt;This note serves as a regression test to ensure that future changes don't reintroduce this issue.&lt;/p&gt;&lt;p&gt;The HTML content includes various elements like: &lt;ul&gt;&lt;li&gt;Lists&lt;/li&gt;&lt;li&gt;Links: &lt;a href="https://www.openstreetmap.org"&gt;OSM&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Code blocks: &lt;code&gt;example code&lt;/code&gt;&lt;/li&gt;&lt;li&gt;Quotes: "This is a quote with 'nested' quotes and &lt;strong&gt;HTML&lt;/strong&gt; content"&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;&lt;p&gt;And many more nested elements that could potentially cause recursion issues if not handled properly by the XSLT processor.&lt;/p&gt;&lt;/div&gt;</html>
  </comment>
  <comment action="commented" timestamp="2013-04-28T03:00:00Z" uid="456" user="testuser2">
    <text>Additional comment with more complex content</text>
    <html>&lt;p&gt;This comment adds more complexity with &lt;em&gt;emphasized text&lt;/em&gt; and &lt;strong&gt;bold text&lt;/strong&gt;. It also includes quotes like "Hello 'world' with &lt;code&gt;code&lt;/code&gt; inside" and more HTML elements.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;This is a blockquote with even more nested content: &lt;ul&gt;&lt;li&gt;Item 1 with &lt;a href="#"&gt;link&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Item 2 with &lt;code&gt;inline code&lt;/code&gt;&lt;/li&gt;&lt;li&gt;Item 3 with &lt;strong&gt;strong text&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;&lt;/blockquote&gt;</html>
  </comment>
</note>

<!-- Note: 123456 - Another test note -->
<note id="123456" lat="40.7589" lon="-73.9851" created_at="2013-04-29T10:00:00Z" closed_at="">
  <comment action="opened" timestamp="2013-04-29T10:00:00Z" uid="789" user="testuser3">
    <text>Test note for validation</text>
    <html>&lt;p&gt;Simple test note to ensure basic functionality works&lt;/p&gt;</html>
  </comment>
</note>
</osm-notes>
